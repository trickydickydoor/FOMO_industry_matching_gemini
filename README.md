# Industry Matching with Gemini

åŸºäº Python å’Œ Google Gemini API çš„æ–°é—»è¡Œä¸šè‡ªåŠ¨åˆ†ç±»ç³»ç»Ÿï¼Œé€šè¿‡ GitHub Actions å®šæ—¶æ‰§è¡Œã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¤– **æ™ºèƒ½åˆ†ç±»**ï¼šä½¿ç”¨ Google Gemini API è‡ªåŠ¨ä¸ºæ–°é—»åŒ¹é…è¡Œä¸šæ ‡ç­¾
- ğŸ’¾ **æŒä¹…åŒ–å­˜å‚¨**ï¼šåŸºäº Supabase æ•°æ®åº“è·Ÿè¸ª API ä½¿ç”¨æƒ…å†µï¼Œé˜²æ­¢è¶…å‡ºå…è´¹é¢åº¦
- â° **å®šæ—¶æ‰§è¡Œ**ï¼šé€šè¿‡ GitHub Actions æ¯å°æ—¶è‡ªåŠ¨è¿è¡Œ
- ğŸš¦ **é€Ÿç‡é™åˆ¶**ï¼šæ™ºèƒ½ç®¡ç† API è°ƒç”¨é€Ÿç‡ï¼ˆRPM/TPM/RPDï¼‰
- ğŸ“Š **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒæ‰¹é‡å¤„ç†æ–°é—»ä»¥æé«˜æ•ˆç‡
- ğŸ”„ **è‡ªåŠ¨é‡è¯•**ï¼šå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•æœºåˆ¶
- ğŸ“ **è¯¦ç»†æ—¥å¿—**ï¼šå®Œæ•´çš„æ‰§è¡Œæ—¥å¿—å’Œç»Ÿè®¡ä¿¡æ¯

## æ”¯æŒçš„è¡Œä¸šåˆ†ç±»ï¼ˆ38ä¸ªï¼‰

- 5Gé€šä¿¡ã€å†œä¸šç§‘æŠ€ã€äººå·¥æ™ºèƒ½ã€AIGCã€æ±½è½¦åˆ¶é€ 
- æ™ºèƒ½é©¾é©¶ã€ç”Ÿç‰©åŒ»è¯ã€äº‘è®¡ç®—ã€å•†ä¸šèˆªå¤©ã€å»ºç­‘å·¥ç¨‹
- å†…å®¹åˆ›ä½œã€è·¨å¢ƒç”µå•†ã€æ–‡åŒ–åˆ›æ„ã€ç½‘ç»œå®‰å…¨ã€ç”µå­å•†åŠ¡
- ä¼ä¸šæœåŠ¡ã€é‡‘èç§‘æŠ€ã€æ¸¸æˆã€å¤§å¥åº·ã€IDCæ•°æ®ä¸­å¿ƒ
- ç‰©è”ç½‘ã€æœ¬åœ°ç”Ÿæ´»æœåŠ¡ã€ç‰©æµå¿«é€’ã€åŒ»ç–—å™¨æ¢°ã€æ–°èƒ½æºæ±½è½¦
- æ–°ææ–™ã€åœ¨çº¿æ•™è‚²ã€çŸ³æ²¹åŒ–å·¥ã€æˆ¿åœ°äº§ã€æ–°èƒ½æº
- é›¶å”®æ¶ˆè´¹ã€æœºå™¨äººã€SaaSã€åŠå¯¼ä½“ã€çŸ­è§†é¢‘ç›´æ’­
- æ™ºèƒ½åˆ¶é€ ã€é’¢é“å†¶é‡‘ã€çººç»‡æœè£…ã€æ—…æ¸¸é…’åº—

## Gemini æ¨¡å‹å…è´¹é¢åº¦

| æ¨¡å‹ | RPM | TPM | RPD |
|------|-----|-----|-----|
| Gemini 2.0 Flash-Lite | 30 | 1,000,000 | 200 |
| Gemini 2.0 Flash | 15 | 1,000,000 | 200 |
| Gemini 2.5 Flash-Lite | 15 | 250,000 | 1,000 |
| Gemini 2.5 Flash | 10 | 250,000 | 250 |
| Gemini 2.5 Pro | 5 | 250,000 | 100 |

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions â”‚â”€â”€â”€â”€â–¶â”‚   Python App  â”‚â”€â”€â”€â”€â–¶â”‚   Supabase  â”‚
â”‚   (æ¯å°æ—¶è§¦å‘)    â”‚     â”‚  (è¡Œä¸šåŒ¹é…å™¨)  â”‚     â”‚  (æ•°æ®å­˜å‚¨)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Gemini API   â”‚
                        â”‚  (æ™ºèƒ½åˆ†ç±»)    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®åº“ç»“æ„

### news_items è¡¨
- `id`: UUID (ä¸»é”®)
- `title`: æ–°é—»æ ‡é¢˜
- `content`: æ–°é—»å†…å®¹
- `published_at`: å‘å¸ƒæ—¶é—´
- `industries`: è¡Œä¸šæ ‡ç­¾æ•°ç»„
- å…¶ä»–å­—æ®µ...

### api_usage è¡¨ï¼ˆAPIä½¿ç”¨è·Ÿè¸ªï¼‰
- `id`: UUID (ä¸»é”®)
- `service_name`: æœåŠ¡åç§° (gemini)
- `model_name`: æ¨¡å‹åç§°
- `date`: æ—¥æœŸ
- `requests_per_minute`: åˆ†é’Ÿè¯·æ±‚æ•°
- `requests_per_day`: æ¯æ—¥è¯·æ±‚æ•°
- `tokens_per_minute`: åˆ†é’ŸTokenæ•°
- `tokens_per_day`: æ¯æ—¥Tokenæ•°

## å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/industry_matching_gemini.git
cd industry_matching_gemini
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶å¡«å†™é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```env
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
GEMINI_API_KEY=your_gemini_api_key
GEMINI_MODEL=gemini-2.0-flash-lite
```

### 4. åˆ›å»ºæ•°æ®åº“è¡¨

åœ¨ Supabase ä¸­æ‰§è¡Œ `create_api_usage_table.sql` åˆ›å»º API ä½¿ç”¨è·Ÿè¸ªè¡¨ã€‚

### 5. æœ¬åœ°æµ‹è¯•

```bash
python src/industry_matcher.py
```

### 6. é…ç½® GitHub Actions

åœ¨ GitHub ä»“åº“çš„ Settings â†’ Secrets and variables â†’ Actions ä¸­æ·»åŠ ï¼š

**Secrets:**
- `SUPABASE_URL`: Supabase é¡¹ç›® URL
- `SUPABASE_KEY`: Supabase Anon Key
- `GEMINI_API_KEY`: Google Gemini API Key

**Variables (å¯é€‰):**
- `GEMINI_MODEL`: ä½¿ç”¨çš„æ¨¡å‹ï¼ˆé»˜è®¤: gemini-2.0-flash-liteï¼‰

## ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨æ‰§è¡Œ
GitHub Actions ä¼šæ¯å°æ—¶è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼Œå¤„ç†è¿‡å» 2 å°æ—¶å†…æœªåˆ†ç±»çš„æ–°é—»ã€‚

### æ‰‹åŠ¨è§¦å‘
åœ¨ GitHub Actions é¡µé¢å¯ä»¥æ‰‹åŠ¨è§¦å‘å·¥ä½œæµï¼Œå¯é€‰å‚æ•°ï¼š
- `limit`: æœ€å¤§å¤„ç†æ–°é—»æ•°é‡

### æœ¬åœ°è¿è¡Œ

```python
from industry_matcher import IndustryMatcher

matcher = IndustryMatcher()
matcher.run(limit=10)  # å¤„ç†æœ€å¤š10æ¡æ–°é—»
```

## é¡¹ç›®ç»“æ„

```
industry_matching_gemini/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ industry_matcher.yml    # GitHub Action é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.py                  # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ supabase_client.py        # Supabase å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ gemini_client.py          # Gemini API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ rate_limiter.py           # é€Ÿç‡é™åˆ¶å™¨
â”‚   â””â”€â”€ industry_matcher.py       # æ ¸å¿ƒåŒ¹é…é€»è¾‘
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_industry_matcher.py  # å•å…ƒæµ‹è¯•
â”œâ”€â”€ requirements.txt               # Python ä¾èµ–
â”œâ”€â”€ .env.example                  # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                     # é¡¹ç›®æ–‡æ¡£
```

## è¿è¡Œæµ‹è¯•

```bash
pytest tests/ -v
```

## ç›‘æ§å’Œæ—¥å¿—

- GitHub Actions è¿è¡Œæ—¥å¿—å¯åœ¨ Actions é¡µé¢æŸ¥çœ‹
- æ¯æ¬¡è¿è¡Œä¼šç”Ÿæˆè¯¦ç»†çš„å¤„ç†ç»Ÿè®¡ä¿¡æ¯
- æ—¥å¿—æ–‡ä»¶ä¼šä½œä¸º Artifacts ä¿å­˜ 7 å¤©

## æ³¨æ„äº‹é¡¹

1. **API é™åˆ¶**ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨ç®¡ç† API è°ƒç”¨é€Ÿç‡ï¼Œç¡®ä¿ä¸è¶…è¿‡å…è´¹é¢åº¦
2. **æ•°æ®åº“æŒä¹…åŒ–**ï¼šAPI ä½¿ç”¨è®¡æ•°å­˜å‚¨åœ¨ Supabaseï¼Œè·¨è¿è¡Œä¿æŒçŠ¶æ€
3. **æ‰¹å¤„ç†ä¼˜åŒ–**ï¼šé»˜è®¤æ¯æ‰¹å¤„ç† 5 æ¡æ–°é—»ï¼Œå¯åœ¨ `config.py` ä¸­è°ƒæ•´
4. **æ—¶åŒºè®¾ç½®**ï¼šé»˜è®¤ä½¿ç”¨ Asia/Shanghai æ—¶åŒºï¼Œå¯åœ¨é…ç½®ä¸­ä¿®æ”¹
5. **é”™è¯¯å¤„ç†**ï¼šåŒ…å«è‡ªåŠ¨é‡è¯•å’Œä¼˜é›…é™çº§æœºåˆ¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **API é™åˆ¶é”™è¯¯**
   - æ£€æŸ¥ api_usage è¡¨ä¸­çš„ä½¿ç”¨è®°å½•
   - è€ƒè™‘åˆ‡æ¢åˆ°å…¶ä»–æ¨¡å‹æˆ–ç­‰å¾…é™åˆ¶é‡ç½®

2. **åˆ†ç±»ä¸å‡†ç¡®**
   - è°ƒæ•´ prompt æç¤ºè¯
   - ç¡®ä¿æ–°é—»å†…å®¹åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯

3. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - éªŒè¯ Supabase URL å’Œ Key
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License